"use strict";(self.webpackChunkghichu_new=self.webpackChunkghichu_new||[]).push([[1292],{2160:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"ReactJS/hook","title":"Hook","description":"useState","source":"@site/docs/web/ReactJS/hook.md","sourceDirName":"ReactJS","slug":"/ReactJS/hook","permalink":"/documents/web/ReactJS/hook","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/web/ReactJS/hook.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Basic","permalink":"/documents/web/ReactJS/basic"},"next":{"title":"Plugin","permalink":"/documents/web/ReactJS/plugin"}}');var c=t(4848),o=t(8453);const a={},i="Hook",s={},u=[{value:"useState",id:"usestate",level:2},{value:"Tow-way binding (form)",id:"tow-way-binding-form",level:3},{value:"useEffect()",id:"useeffect",level:2},{value:"useLayoutEffect()",id:"uselayouteffect",level:2},{value:"useRef()",id:"useref",level:2},{value:"forwardRef()",id:"forwardref",level:3},{value:"useImperativeHandle()",id:"useimperativehandle",level:2},{value:"React.memo()",id:"reactmemo",level:2},{value:"useCallback()",id:"usecallback",level:2},{value:"useMemo()",id:"usememo",level:2},{value:"useReducer()",id:"usereducer",level:2},{value:"useContext()",id:"usecontext",level:2},{value:"React.createContext()",id:"reactcreatecontext",level:3},{value:"Redux vs React Context",id:"redux-vs-react-context",level:3}];function l(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",...(0,o.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"hook",children:"Hook"})}),"\n",(0,c.jsx)(e.h2,{id:"usestate",children:"useState"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-title='D\xf9ng",metastring:"khi n\xe0o'",children:"- Khi mu\u1ed1n d\u1eef li\u1ec7u thay \u0111\u1ed5i th\xec giao di\u1ec7n t\u1ef1 \u0111\u1ed9ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt (render l\u1ea1i theo d\u1eef li\u1ec7u)\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-jsx",metastring:"title='C\xe1ch d\xf9ng'",children:"const [state, setState] = useState(initialState);\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-title='L\u01b0u",metastring:"\xfd'",children:"- Component \u0111\u01b0\u1ee3c re-render khi setState.\r\n- Initial state ch\u1ec9 d\xf9ng cho l\u1ea7n \u0111\u1ea7u.\r\n- setState v\u1edbi call back: \u0111\u1ed1i s\u1ed1 s\u1ebd l\xe0 gi\xe1 tr\u1ecb tr\u01b0\u1edbc \u0111\xf3 c\u1ee7a state.\r\nVD: setState(prevState => prevState + 1)\r\n- Initial state v\u1edbi callback: l\u1ea5y gi\xe1 tr\u1ecb return trong callback l\xe0m gi\xe1 tr\u1ecb kh\u1edfi t\u1ea1o.\r\n- Setstate l\xe0 thay th\u1ebf state b\u1eb1ng gi\xe1 tr\u1ecb m\u1edbi: n\xean copy state c\u0169 l\u1ea1i \u0111\u1ec3 tr\xe1nh m\u1ea5t d\u1eef li\u1ec7u (s\u1eed d\u1ee5ng to\xe1n t\u1eed Spread ...)\n"})}),"\n",(0,c.jsx)(e.h3,{id:"tow-way-binding-form",children:"Tow-way binding (form)"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- ReactJS default s\u1ebd l\xe0 r\xe0ng bu\u1ed9c 1 chi\u1ec1u (One-way binding).\r\n- Tow-way binding: r\xe0ng bu\u1ed9c 2 chi\u1ec1u ngh\u0129a l\xe0 c\xf3 th\u1ec3 thay \u0111\u1ed5i c\u1ea3 d\u1eef li\u1ec7u \u1edf component\r\nv\xe0 ngo\xe0i giao di\u1ec7n \u0111\u1ec1u c\xf3 th\u1ec3 thay \u0111\u1ed5i d\u1eef li\u1ec7u g\u1ed1c (2 chi\u1ec1u).\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='V\xed d\u1ee5'",children:'import { useState } from "react";\r\n\r\nconst courses = [\r\n    { id: 1, name: "HTML, CSS" },\r\n    {\r\n        id: 2,\r\n        name: "Javascript",\r\n    },\r\n    {\r\n        id: 3,\r\n        name: "ReactJS",\r\n    },\r\n];\r\n\r\nfunction App() {\r\n    // radio\r\n    const [checked, setChecked] = useState(1);\r\n    const handleChangeInput = (id) => {\r\n        setChecked(id);\r\n    };\r\n\r\n    // checkbox\r\n    const [checked, setChecked] = useState([]);\r\n    const handleChangeInput = (id) => {\r\n        setChecked((prev) => {\r\n            const isChecked = checked.includes(id);\r\n            if (isChecked) {\r\n                return checked.filter((item) => item !== id);\r\n            } else {\r\n                return [...prev, id];\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        console.log({ id: checked });\r\n    };\r\n\r\n    return (\r\n        <div className="App">\r\n            {courses.map((course) => (\r\n                <div key={course.id}>\r\n                    <input\r\n                        type="checkbox"\r\n                        // value={value} default\r\n                        checked={checked === course.id} // radio\r\n                        checked={checked.includes(course.id)} // checkbox\r\n                        id={course.id}\r\n                        onChange={() => handleChangeInput(course.id)}\r\n                    />\r\n                    <label htmlFor={course.id}>{course.name}</label>\r\n                </div>\r\n            ))}\r\n            <button onClick={handleSubmit}>Submit</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\n'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='TodoList'",children:'import { useState } from "react";\r\n\r\nfunction App() {\r\n    const [jobs, setJobs] = useState(() => {\r\n        const storegeJobs = JSON.parse(localStorage.getItem("jobs")) ?? [];\r\n        return storegeJobs;\r\n    });\r\n    const [job, setJob] = useState("");\r\n    const [indexEdit, setIndexEdit] = useState(null);\r\n\r\n    const handleSubmit = (job) => {\r\n        setJobs((prev) => {\r\n            if (indexEdit === 0 || indexEdit > 0) {\r\n                prev.splice(indexEdit, 1, job);\r\n\r\n                return prev;\r\n            } else {\r\n                const newJobs = [...prev, job];\r\n\r\n                const jsonJobs = JSON.stringify(newJobs);\r\n\r\n                localStorage.setItem("jobs", jsonJobs);\r\n\r\n                return newJobs;\r\n            }\r\n        });\r\n\r\n        setJob("");\r\n        setIndexEdit(null);\r\n    };\r\n\r\n    const handleEdit = (index) => {\r\n        setJob(jobs[index]);\r\n        setIndexEdit(index);\r\n    };\r\n\r\n    const handleDelete = (index) => {\r\n        const newJobs = [...jobs];\r\n        newJobs.splice(index, 1);\r\n        setJobs(newJobs);\r\n    };\r\n\r\n    return (\r\n        <div className="App" style={{ padding: 32 }}>\r\n            <input value={job} onChange={(e) => setJob(e.target.value)} />\r\n            <button onClick={() => handleSubmit(job)}>\r\n                {indexEdit === 0 || indexEdit > 0 ? "Edit" : "Add"}\r\n            </button>\r\n            <ul>\r\n                {jobs.map((job, index) => (\r\n                    <li key={index}>\r\n                        {job}\r\n                        <button onClick={() => handleEdit(index)}>Edit</button>\r\n                        <button onClick={() => handleDelete(index)}>\r\n                            Delete\r\n                        </button>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\n'})}),"\n",(0,c.jsx)(e.h2,{id:"useeffect",children:"useEffect()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-title='C\xfa",metastring:"Ph\xe1p'",children:"1. useEffect(callback);\r\n- G\u1ecdi callback m\u1ed7i khi component re-render.\r\n- G\u1ecdi callback sau khi component th\xeam element v\xe0o DOM.\r\n2. useEffect(callback, []);\r\n- Ch\u1ec9 g\u1ecdi callback 1 l\u1ea7n sau khi component mounted.\r\n3. useEffect(callback, [dependencies]);\r\n- dependencies: l\xe0 1 bi\u1ebfn ch\u1ee9a d\u1eef li\u1ec7u.\r\n- Callback s\u1ebd \u0111\u01b0\u1ee3c g\u1ecdi l\u1ea1i m\u1ed7i khi dependencies thay \u0111\u1ed5i.\r\n----- L\u01b0u \xfd --------\r\n- Callback lu\xf4n \u0111\u01b0\u1ee3c g\u1ecdi sau khi component mounted.\r\n- Cleanup function l\xe0 1 callback function optional \u1edf cu\u1ed1i c\u1ee7a useEffect v\u1edbi c\xfa ph\xe1p return (callback).\r\n- Cleanup function lu\xf4n \u0111\u01b0\u1ee3c g\u1ecdi tr\u01b0\u1edbc khi component unmount.\r\n- Cleanup function lu\xf4n \u0111\u01b0\u1ee3c g\u1ecdi tr\u01b0\u1edbc khi callback \u0111\u01b0\u1ee3c g\u1ecdi (tr\u1eeb l\u1ea7n \u0111\u1ea7u ti\xean(mounted)).\r\n- S\u1eed d\u1ee5ng khi removeEventListener v\xe0 Clear Time.\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='V\xed d\u1ee5'",children:'import React, { useEffect, useState } from "react";\r\n\r\nfunction Content() {\r\n    const [showGoToTop, setShowGoToTop] = useState(false);\r\n    const [countdown, setCountdown] = useState(180);\r\n    const [avatar, setAvatar] = useState();\r\n\r\n    const handlePreviewAvatar = (e) => {\r\n        const file = e.target.files[0];\r\n\r\n        file.preview = URL.createObjectURL(file);\r\n\r\n        setAvatar(file);\r\n    };\r\n\r\n    useEffect(() => {\r\n        // cleanup\r\n        return () => {\r\n            avatar && URL.revokeObjectURL(avatar.preview);\r\n        };\r\n    }, [avatar]);\r\n\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            setShowGoToTop(window.scrollY >= 200);\r\n        };\r\n\r\n        window.addEventListener("scroll", handleScroll);\r\n        console.log("Add");\r\n\r\n        // Cleanup function\r\n        return () => {\r\n            window.removeEventListener("scroll", handleScroll);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const timerId = setInterval(() => {\r\n            setCountdown((prevState) => prevState - 1);\r\n        }, 1000);\r\n\r\n        // setTimeout(() => {\r\n        //     setCountdown(countdown - 1);\r\n        // }, 1000);\r\n\r\n        return () => clearInterval(timerId);\r\n    }, []); //[countdown]\r\n\r\n    return (\r\n        <>\r\n            <h1>{countdown}</h1>\r\n\r\n            {showGoToTop && (\r\n                <button style={{ position: "fixed", right: 20, bottom: 20 }}>\r\n                    Go To Top\r\n                </button>\r\n            )}\r\n\r\n            <input type="file" onChange={handlePreviewAvatar} />\r\n\r\n            {avatar && <img src={avatar.preview} alt="" width="80%" />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Content;\n'})}),"\n",(0,c.jsx)(e.h2,{id:"uselayouteffect",children:"useLayoutEffect()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- Gi\u1ed1ng useEffect ch\u1ec9 kh\xe1c th\u1ee9 t\u1ef1 th\u1ef1c hi\u1ec7n c\xf4ng vi\u1ec7c.\r\n- S\u1eed d\u1ee5ng khi setState r\u1ed3i l\u1ea1i check \u0111i\u1ec1u ki\u1ec7n state \u0111\xf3 \u1edf useEffect v\xe0 \u0111i set l\u1ea1i state \u0111\xf3.\r\n- useEffect:\r\n1. C\u1eadp nh\u1eadt l\u1ea1i state.\r\n2. C\u1eadp nh\u1eadt l\u1ea1i DOM (mutated).\r\n3. Render l\u1ea1i UI.\r\n4. G\u1ecdi cleanup n\u1ebfu dependencies thay \u0111\u1ed5i.\r\n5. G\u1ecdi useEffect callback.\r\n\r\n- useLayoutEffect\r\n1. C\u1eadp nh\u1eadt l\u1ea1i state.\r\n2. C\u1eadp nh\u1eadt l\u1ea1i DOM (mutated).\r\n3. G\u1ecdi cleanup n\u1ebfu dependencies thay \u0111\u1ed5i (sync).\r\n4. G\u1ecdi useLayoutEffect callback (sync).\r\n5. Render l\u1ea1i UI.\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='V\xed d\u1ee5'",children:'import React, { useEffect, useLayoutEffect, useState } from "react";\r\n\r\nfunction Content() {\r\n    const [count, setCount] = useState(0);\r\n\r\n    useLayoutEffect(() => {\r\n        if (count > 3) setCount(0);\r\n    }, [count]);\r\n    // S\u1eed d\u1ee5ng useEffect \u1edf \u0111\xe2y s\u1ebd l\xe0m giao di\u1ec7n c\u1eadp nh\u1eadt sai gi\xe1 tr\u1ecb mong mu\u1ed1n g\xe2y kh\xf3 ch\u1ecbu.\r\n    //useLayoutEffect s\u1ebd kh\u1eafc ph\u1ee5c \u0111i\u1ec1u \u0111\xf3.\r\n\r\n    const handleRun = () => {\r\n        setCount(count + 1);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <h1>{count}</h1>\r\n            <button onClick={handleRun}>RUN</button>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Content;\n'})}),"\n",(0,c.jsx)(e.h2,{id:"useref",children:"useRef()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- C\xfa ph\xe1p: useRef(initialValue).\r\n- initialValue default l\xe0 undefined.\r\n- useRef return v\u1ec1 1 object c\xf3 key l\xe0 current.\r\nVD: const ref = useRef(10)\r\n    console.log(ref) // output: { current: 10}\r\n- S\u1eed d\u1ee5ng \u0111\u1ec3 l\u01b0u c\xe1c gi\xe1 tr\u1ecb qua m\u1ed9t tham chi\u1ebfu b\xean ngo\xe0i.\r\n- Khi component re-render s\u1ebd t\u1ea1o ra 1 ph\u1ea1m vi m\u1edbi n\xean s\u1eed d\u1ee5ng useRef \u0111\u1ec3 gi\xe1 tr\u1ecb c\u1ee7a bi\u1ebfn s\u1ebd kh\xf4ng b\u1ecb \u1ea3nh h\u01b0\u1edfng.\r\n- C\xf3 s\u1eed d\u1ee5ng \u0111\u1ec3 l\u1ea5y gi\xe1 tr\u1ecb DOM element b\u1eb1ng c\xe1ch g\xe1n t\u1eeb kh\xf3a ref={useRef()} v\xe0o attribute DOM element mu\u1ed1n l\u1ea5y.\r\n- ref kh\xf4ng th\u1ec3 truy\u1ec1n d\u01b0\u1edbi d\u1ea1ng props c\u1ee7a 1 Component.\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='V\xed d\u1ee5'",children:'import React, { useEffect, useRef, useState } from "react";\r\n\r\nfunction Content() {\r\n    const [count, setCount] = useState(60);\r\n\r\n    const timerId = useRef();\r\n    const prevCount = useRef();\r\n\r\n    useEffect(() => {\r\n        prevCount.current = count;\r\n    }, [count]);\r\n\r\n    const handleStart = () => {\r\n        timerId.current = setInterval(() => {\r\n            setCount((prevCount) => prevCount - 1);\r\n        }, 1000);\r\n    };\r\n\r\n    const handleStop = () => {\r\n        clearInterval(timerId.current);\r\n    };\r\n\r\n    console.log(count, prevCount);\r\n    return (\r\n        <>\r\n            <h1>{count}</h1>\r\n            <button onClick={handleStart}>Start</button>\r\n            <button onClick={handleStop}>Stop</button>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Content;\n'})}),"\n",(0,c.jsx)(e.h3,{id:"forwardref",children:"forwardRef()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- S\u1eed d\u1ee5ng \u0111\u1ec3 truy\u1ec1n props ref cho 1 component.\r\n- L\xe0 1 HOC n\xean c\u1ea7n ph\u1ea3i b\u1ecdc component \u0111\u01b0\u1ee3c truy\u1ec1n props ref d\u01b0\u1edbi d\u1ea1ng \u0111\u1ed1i s\u1ed1 th\u1ee9 2.\n"})}),"\n",(0,c.jsx)(e.h2,{id:"useimperativehandle",children:"useImperativeHandle()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- C\xfa ph\xe1p: useImperativeHandle(ref, createHandle);\r\nref: ref truy\u1ec1n v\xe0o.\r\ncreateHandle: h\xe0m t\u1ea1o \u0111\u1ec3 public c\xe1c method.\r\n- S\u1eed d\u1ee5ng \u0111\u1ec3 t\xf9y ch\u1ec9nh c\xe1c method \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb v\u1edbi component cha\r\nkhi s\u1eed d\u1ee5ng ref, \u0111\u1ec3 b\u1ea3o to\xe0n d\u1eef li\u1ec7u.\r\n- Hook b\u1eaft bu\u1ed9c nh\u1eadn ref n\xean trong h\u1ea7u h\u1ebft tr\u01b0\u1eddng h\u1ee3p n\xean s\u1eed d\u1ee5ng v\u1edbi forwardRef()\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='V\xed d\u1ee5'",children:"function FancyInput(props, ref) {\r\n  const inputRef = useRef();\r\n  useImperativeHandle(ref, () => ({\r\n    focus: () => {\r\n      inputRef.current.focus();\r\n    }\r\n  }));\r\n  return <input ref={inputRef} ... />;\r\n}\r\nFancyInput = forwardRef(FancyInput);\r\n\r\n// Trong v\xed d\u1ee5 n\xe0y, component cha render <FancyInput ref={inputRef} />\r\n// ch\u1ec9 c\xf3 th\u1ec3 s\u1eed d\u1ee5ng inputRef.current.focus().\n"})}),"\n",(0,c.jsx)(e.h2,{id:"reactmemo",children:"React.memo()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- L\xe0 1 Higher-Order Functions (HOC) b\u1ecdc component.\r\n- React.memo t\u01b0\u01a1ng t\u1ef1 PureComponent c\u1ee7a ClassComponent.\r\n- S\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ed1i \u01b0u performance,\r\nkhi component cha d\xf9ng nhi\u1ec1u component con v\xe0 state c\u1ee7a component cha kh\xf4ng \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn component con\r\nth\xec n\xean s\u1eed d\u1ee5ng memo cho c\xe1c component con \u0111\xf3.\r\n- memo ho\u1ea1t \u0111\u1ed9ng theo c\xe1ch so s\xe1nh c\xe1c props sau c\xf3 kh\xe1c props tr\u01b0\u1edbc kh\xf4ng th\xec m\u1edbi\r\nth\u1ef1c hi\u1ec7n re-render l\u1ea1i component.\r\nVD: export default React.memo(App)\n"})}),"\n",(0,c.jsx)(e.h2,{id:"usecallback",children:"useCallback()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- C\xfa ph\xe1p: useCallback(callback, dependencies). callback l\xe0 h\xe0m truy\u1ec1n v\xe0o.\r\ndependencies l\xe0 bi\u1ebfn truy\u1ec1n v\xe0o s\u1eed d\u1ee5ng nh\u01b0 l\xe0 useEffect\r\nkhi bi\u1ebfn thay \u0111\u1ed5i th\xec n\xf3 s\u1ebd ch\u1ea1y callback tr\u1ea3 v\u1ec1 function tham chi\u1ebfu thay \u0111\u1ed5i theo bi\u1ebfn,\r\nm\u1eb7c \u0111\u1ecbnh s\u1ebd l\xe0 [] th\xec s\u1ebd kh\xf4ng t\u1ea1o tham chi\u1ebfu m\u1edbi.\r\n- Ch\u1ec9 s\u1eed d\u1ee5ng useCallback() khi d\xf9ng React.memo() \u0111\u1ec3 gi\xfap memo ho\u1ea1t \u0111\u1ed9ng \u0111\xfang.\r\n- Khi truy\u1ec1n 1 props l\xe0 1 function th\xec\r\nm\u1ed7i khi re-render n\xf3 s\u1ebd t\u1ea1o ra 1 tham chi\u1ebfu m\u1edbi d\xf9 gi\xe1 tr\u1ecb c\xf3 thay \u0111\u1ed5i hay kh\xf4ng\r\nn\xean React.memo trong TH n\xe0y s\u1ebd kh\xf4ng ho\u1ea1t \u0111\u1ed9ng \u0111\xfang.\r\n- useCallback s\u1ebd s\u1ebd tr\u1ea3 v\u1ec1 1 callback kh\xf4ng n\u1eb1m trong ph\u1ea1m vi h\xe0m\r\n\u0111\u1ec3 khi re-render component n\xf3 v\u1eabn tr\u1ea3 v\u1ec1 tham chi\u1ebfu c\u1ee7a callback \u0111\xf3,\r\nn\xean React.memo s\u1ebd ho\u1ea1t \u0111\u1ed9ng \u0111\xfang.\n"})}),"\n",(0,c.jsx)(e.h2,{id:"usememo",children:"useMemo()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- C\xfa ph\xe1p: useMemo(callback, dependencies).\r\n- dependencies l\xe0 bi\u1ebfn truy\u1ec1n v\xe0o s\u1eed d\u1ee5ng nh\u01b0 l\xe0 useEffect,\r\nkhi bi\u1ebfn thay \u0111\u1ed5i th\xec useMemo s\u1ebd ch\u1ea1y callback, m\u1eb7c \u0111\u1ecbnh l\xe0 [].\r\n- S\u1eed d\u1ee5ng khi mu\u1ed1n tr\xe1nh th\u1ef1c hi\u1ec7n 1 \u0111o\u1ea1n logic n\xe0o \u0111\xf3 kh\xf4ng c\u1ea7n thi\u1ebft,\r\n\u0111o\u1ea1n logic \u0111\xf3 s\u1ebd truy\u1ec1n v\xe0o callback.\r\n- callback tr\u1ea3 v\u1ec1 1 gi\xe1 tr\u1ecb (return value).\r\n- L\xe0 hook s\u1eed d\u1ee5ng trong component, kh\xe1c v\u1edbi React.memo l\xe0 HOC s\u1eed d\u1ee5ng \u0111\u1ec3 b\u1ecdc component.\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",metastring:"title='V\xed d\u1ee5'",children:'import { useMemo, useRef, useState } from "react";\r\nimport Content from "./Content";\r\n\r\nfunction App() {\r\n    const [name, setName] = useState("");\r\n    const [price, setPrice] = useState("");\r\n    const [products, setProducts] = useState([]);\r\n\r\n    const nameRef = useRef();\r\n\r\n    const handleSubmit = () => {\r\n        setProducts([\r\n            ...products,\r\n            {\r\n                name,\r\n                price: +price,\r\n            },\r\n        ]);\r\n\r\n        setPrice("");\r\n        setName("");\r\n\r\n        nameRef.current.focus();\r\n    };\r\n\r\n    // d\xf9ng useMemo th\xec khi g\xf5 input callback s\u1ebd kh\xf4ng ch\u1ea1y\r\n    // ch\u1ec9 ch\u1ea1y khi products thay \u0111\u1ed5i\r\n    const total = useMemo(() => {\r\n        const result = products.reduce((result, product) => {\r\n            console.log(1);\r\n            return result + product.price;\r\n        }, 0);\r\n\r\n        return result;\r\n    }, [products]);\r\n\r\n    return (\r\n        <div style={{ padding: 30 }}>\r\n            <input\r\n                ref={nameRef}\r\n                value={name}\r\n                placeholder="Enter name"\r\n                onChange={(e) => setName(e.target.value)}\r\n            />\r\n            <br />\r\n            <input\r\n                value={price}\r\n                placeholder="Enter price"\r\n                onChange={(e) => setPrice(e.target.value)}\r\n            />\r\n            <button onClick={handleSubmit}>Add</button>\r\n            <br />\r\n            Total: {total}\r\n            <ul>\r\n                {products.map((product, index) => (\r\n                    <li key={index}>\r\n                        {product.name} - {product.price}\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\n'})}),"\n",(0,c.jsx)(e.h2,{id:"usereducer",children:"useReducer()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-title='C\xfa",metastring:"ph\xe1p'",children:"- const [state, dispatch] = useReducer(reducer, initialState);\r\n- state: state hi\u1ec7n t\u1ea1i.\r\n- dispatch: 1 h\xe0m nh\u1eadn v\xe0o 1 action r\u1ed3i g\u1ecdi h\xe0m reducer \u0111\u1ec3 x\u1eed l\xfd.\r\n- reducer: 1 h\xe0m nh\u1eadn state v\xe0 action l\xe0m tham s\u1ed1.\r\nth\u01b0\u1eddng s\u1eed d\u1ee5ng switch case \u0111\u1ec3 l\u1ecdc c\xe1c action kh\xe1c nhau \u0111\u1ec3 x\u1eed l\xfd.\r\n- action: ch\u1ee9a c\xe1c key \u0111\u1ec3 reducer x\u1eed l\xfd.\r\n- initialState: gi\xe1 tr\u1ecb kh\u1edfi t\u1ea1o state.\r\n\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"\r\n-   Cung c\u1ea5p th\xeam 1 s\u1eed l\u1ef1a ch\u1ecdn s\u1eed d\u1ee5ng state cho function component (thay th\u1ebf useState).\r\n-   Ph\xf9 h\u1ee3p h\u01a1n cho t\xecnh hu\u1ed1ng state ph\u1ee9c t\u1ea1p h\u01a1n.\r\n\n"})}),"\n",(0,c.jsx)(e.h2,{id:"usecontext",children:"useContext()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- C\xfa ph\xe1p: useContext(MyContext).\r\nMyContext l\xe0 object \u0111\u01b0\u1ee3c t\u1ea1o ra t\u1eeb h\xe0m React.createContext.\r\nH\xe0m tr\u1ea3 v\u1ec1 gi\xe1 tr\u1ecb \u0111\u01b0\u1ee3c truy\u1ec1n v\xe0o prop value c\u1ee7a Component MyContext.Provider\r\n\u1edf tr\xean \u0111\u1ec3 truy c\u1eadp t\u1eeb nh\u1eefng component con.\r\nVD: <MyContext.Provider value={value}>\r\n    <Vidu>\r\n        <Vidu2 />\r\n    </Vidu>\r\n</MyContext.Provider>\r\nTruy c\u1eadp value t\u1eeb component Vidu2.\r\n- \u0110\u01a1n gi\u1ea3n h\xf3a truy\u1ec1n d\u1eef li\u1ec7u t\u1eeb component cha xu\u1ed1ng component con\r\nm\xe0 kh\xf4ng c\u1ea7n d\xf9ng props th\u1ee7 c\xf4ng.\r\n- C\xf3 th\u1ec3 truy\u1ec1n nhi\u1ec1u d\u1eef li\u1ec7u b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng object.\r\n\r\n\n"})}),"\n",(0,c.jsx)(e.h3,{id:"reactcreatecontext",children:"React.createContext()"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"- Kh\u1edfi t\u1ea1o gi\xe1 tr\u1ecb ban \u0111\u1ea7u cho Context API b\u1eb1ng React.createContext(), h\xe0m n\xe0y tr\u1ea3 v\u1ec1\r\nm\u1ed9t object bao g\u1ed3m l\xe0 Provider v\xe0 Consumer.\r\n- Khi m\u1ed9t component \u0111\u0103ng k\xfd s\u1eed d\u1ee5ng Context n\xe0y th\xec n\xf3 s\u1ebd \u0111\u1ecdc gi\xe1 tr\u1ecb\r\ncontext t\u1eeb Provider g\u1ea7n nh\u1ea5t\r\nContext.Provider:\r\n\r\n- Provider l\xe0 m\u1ed9t HOC, truy\u1ec1n v\xe0o gi\xe1 tr\u1ecb qua prop ( value \u2013 gi\xe1 tr\u1ecb c\u1ee7a Context).\r\n- Khi value thay \u0111\u1ed5i (state thay \u0111\u1ed5i), th\xe0nh ph\u1ea7n b\xean trong Provider n\xe0y s\u1ebd b\u1ecb re-render.\r\n\r\n- Context.Consumer:\r\nC\xf3 th\u1ec3 s\u1eed d\u1ee5ng \u1edf b\u1ea5t c\u1ee9 \u0111\xe2u b\xean d\u01b0\u1edbi Provider.\r\n- Consumer get \u0111\u01b0\u1ee3c gi\xe1 tr\u1ecb c\u1ee7a prop value c\u1ee7a Provider th\xf4ng qua prop children \u0111\u1ec3 s\u1eed d\u1ee5ng trong component.\r\n-Ngo\xe0i ra c\xf2n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng Class.contextType \u0111\u1ec3 truy c\u1eadp v\xe0o gi\xe1 tr\u1ecb context n\xe0y n\u1eefa.\n"})}),"\n",(0,c.jsx)(e.h3,{id:"redux-vs-react-context",children:"Redux vs React Context"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-title='Kh\xe1c",metastring:"nhau'",children:"- Redux d\u1ec5 d\xe0ng debugging h\u01a1n (React debug).\r\n- Redux cung c\u1ea5p s\u1eb5n ki\u1ebfn tr\xfac Middlaware h\u01a1n Context (logger, saga, persist...).\r\n- Redux d\u1ec5 d\xe0ng m\u1edf r\u1ed9ng h\u01a1n.\r\n- Redux cross-platfrom (\u0111a n\u1ec1n t\u1ea3ng) kh\xf4ng ph\u1ee5 thu\u1ed9c v\xe0o React nh\u01b0 Context.\r\n- D\u1ec5 d\xe0ng c\u1ea5u h\xecnh h\u01a1n Context.\r\n- Performance h\u01a1n h\u1eb3n Context: Redux ch\u1ec9 re-render component c\xf3 state b\u1ecb thay \u0111\u1ed5i,\r\nc\xf2n Context re-render t\u1ea5t c\u1ea3 component n\u1eb1m trong Provider.\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-title='Khi",metastring:"n\xe0o d\xf9ng'",children:"- D\xf9ng context cho \u1ee9ng d\u1ee5ng v\u1eeba nh\u1ecf v\xe0 tr\u01b0\u1eddng h\u1ee3p setState kh\xf4ng nhi\u1ec1u (h\xe0nh vi \xedt d\xf9ng). VD: thay \u0111\u1ed5i s\xe1ng t\u1ed1i...\r\n- D\xf9ng redux cho \u1ee9ng d\u1ee5ng l\u1edbn h\u01a1n v\xe0 tr\u01b0\u1eddng h\u1ee3p state thay \u0111\u1ed5i nhi\u1ec1u l\u1ea7n.\r\n\n"})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(l,{...n})}):l(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>i});var r=t(6540);const c={},o=r.createContext(c);function a(n){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:a(n.components),r.createElement(o.Provider,{value:e},n.children)}}}]);